var bgx=92,bgy=10;
var graph=[
[1,1,1,1,1,1,1,1,1,1,1,24,1,1,1,1,1,1,1,1,4,2,3,3,3,0,3,2,2,2,5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,24,1,1,1,1,1,1,1,1,3,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,24,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,24,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,0,0,0,3,31,31,31,3,3,0,0,0,0,0,0,0,2,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,0,3,3,31,2,2,25,2,2,31,31,3,0,0,0,0,0,0,2,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,3,31,31,2,25,25,4,25,25,25,2,2,6,31,0,0,0,0,0,0,2,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,3,31,31,2,25,25,25,25,4,4,25,25,6,2,31,31,3,0,0,0,0,3,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,31,31,2,2,25,25,25,4,4,4,4,4,25,2,2,2,2,31,3,0,0,0,0,3,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,31,0,0,0,0,31,4,2,2,4,4,25,4,4,4,4,4,4,4,4,25,25,4,2,31,3,0,0,0,0,2,1,1,1,1,1,1,1,1,1],
[24,24,1,1,1,1,1,1,1,1,0,0,0,0,31,4,4,4,4,24,4,4,4,4,4,4,4,4,4,24,4,4,4,6,2,2,31,0,0,0,31,1,1,1,1,1,1,1,1,1],
[24,24,1,1,1,1,1,1,1,24,0,0,0,3,4,2,4,4,4,4,24,4,24,24,24,24,24,24,24,4,4,24,6,25,4,4,2,0,0,0,3,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,4,0,0,0,3,2,31,24,4,24,24,24,24,24,24,2,4,4,2,4,4,2,4,25,2,2,4,2,0,0,0,3,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,2,0,0,0,0,3,2,24,4,24,2,2,4,31,2,3,2,31,0,2,4,31,2,4,31,2,31,3,0,0,0,0,4,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,24,24,1,2,0,0,0,0,0,4,31,2,31,31,3,31,3,31,3,3,0,0,31,0,0,2,24,31,31,3,0,0,0,0,0,2,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,24,24,1,31,0,0,0,0,0,1,3,31,0,0,31,3,0,0,0,0,0,0,0,0,2,1,4,31,31,0,0,0,0,0,0,2,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,1,31,0,0,0,0,0,3,3,3,31,2,2,2,4,1,1,31,31,4,3,0,0,0,0,0,2,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,2,0,0,0,3,4,1,2,0,0,0,31,4,1,1,1,1,1,1,1,1,4,4,24,24,1,2,0,0,0,0,0,2,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,24,0,0,0,31,1,1,4,0,3,2,4,24,24,24,24,24,24,24,2,31,3,4,1,24,1,4,0,0,0,0,0,24,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,3,0,0,3,1,1,1,24,1,1,4,4,1,24,24,24,1,1,4,4,1,24,24,24,1,1,2,0,0,0,3,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,3,0,0,2,24,2,2,1,1,1,1,1,2,1,1,1,24,2,24,1,1,1,1,4,3,2,2,0,0,0,2,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,3,0,0,2,0,3,24,2,2,2,2,1,2,3,3,3,3,2,4,2,3,31,2,1,3,3,4,0,3,0,2,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,3,3,0,4,2,2,1,2,2,0,0,4,1,3,3,0,3,1,2,3,3,2,4,1,3,2,1,0,4,0,2,1,24,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,2,3,0,24,2,3,1,1,1,4,4,1,4,0,1,4,0,24,1,1,1,1,1,1,3,24,24,0,2,31,4,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,2,3,0,2,4,3,24,1,1,1,1,1,3,3,1,1,3,3,1,1,1,1,1,2,31,1,2,31,2,31,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,24,31,0,3,1,2,2,2,2,2,2,3,3,24,1,1,1,3,3,2,2,2,31,2,1,1,3,31,3,2,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,3,0,0,4,1,24,2,2,2,2,2,1,1,24,24,24,1,4,4,4,4,1,1,1,2,0,0,3,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,4,0,0,2,1,24,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,24,24,1,31,0,3,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,31,0,3,1,24,24,24,24,24,2,1,24,24,24,2,2,2,4,24,24,1,1,1,3,0,2,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,24,24,3,0,2,1,24,1,24,1,31,0,0,0,0,0,0,3,24,4,4,24,24,31,0,2,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,2,1,1,24,1,24,2,2,2,2,24,24,1,1,1,4,2,31,0,0,2,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,24,0,0,0,2,1,1,1,1,1,1,1,1,24,4,24,24,4,31,0,3,0,0,24,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,0,0,31,1,2,3,2,3,3,3,3,3,3,0,0,0,3,4,3,0,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,2,24,3,3,0,0,2,4,4,24,2,3,2,1,1,1,0,0,24,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,31,0,31,1,1,1,24,4,24,1,1,1,24,24,1,1,1,2,0,2,1,1,1,1,24,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,0,2,1,24,24,2,2,24,24,4,2,2,24,1,24,0,0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,31,0,3,1,24,1,4,2,3,3,3,2,24,24,1,2,0,0,24,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,24,1,1,31,0,0,24,1,24,1,1,1,24,1,1,24,1,1,0,0,0,2,4,1,1,24,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,3,0,0,3,3,0,0,3,4,1,24,24,24,24,24,24,1,1,3,0,31,3,0,0,2,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,3,0,0,0,0,3,4,3,0,0,2,24,1,1,24,1,1,4,3,0,2,1,24,3,0,0,2,1,1,1,1,1,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,31,24,24,31,0,0,0,2,4,1,24,2,0,0,2,1,24,24,2,0,0,0,3,2,1,1,1,1,1,1,1,1,1,1],
[1,24,1,1,1,1,1,24,3,3,3,0,0,0,3,2,2,24,1,24,31,0,0,0,0,0,0,0,0,2,1,24,24,24,1,2,0,0,0,0,2,2,2,1,1,1,1,1,1,1],
[1,1,1,1,1,1,1,3,0,3,0,0,0,0,2,1,24,24,24,24,24,2,0,0,0,0,0,0,2,24,24,24,24,24,1,31,0,0,0,0,0,0,0,2,1,1,1,1,1,1],
[1,1,1,1,1,2,3,0,2,1,4,3,0,0,3,1,24,24,24,24,24,24,2,31,3,3,31,2,24,24,24,24,24,24,1,3,0,0,0,0,3,31,0,3,1,1,1,1,1,1],
[1,24,1,1,1,3,0,3,3,4,1,1,2,0,0,24,24,24,24,24,24,24,4,2,4,25,25,4,24,24,24,24,24,24,1,3,0,0,0,2,1,2,0,0,31,24,1,1,1,1],
[1,1,1,2,2,0,0,3,2,2,24,24,1,4,3,3,24,24,24,24,24,24,24,25,25,2,2,24,24,24,24,24,24,1,2,0,0,3,4,1,24,2,3,0,0,3,4,1,1,1],
[24,31,3,0,0,3,3,0,3,4,2,2,4,24,24,2,4,24,24,24,24,24,24,24,4,4,24,24,24,24,24,24,1,2,0,0,31,1,24,24,24,31,3,3,3,0,0,3,31,4],
[0,0,0,0,3,2,2,2,31,3,4,2,2,4,24,4,24,1,24,24,24,24,24,24,24,24,24,24,24,24,24,24,2,0,3,4,1,1,1,4,3,3,31,2,2,3,0,0,0,0],
[0,0,0,3,31,2,2,4,24,31,0,2,24,2,4,2,3,31,2,1,1,24,24,24,24,24,24,24,24,24,1,4,3,2,4,1,1,4,31,3,31,2,24,2,2,31,31,0,0,0],
[0,0,0,31,31,2,4,4,4,4,2,0,3,2,4,2,0,0,0,2,4,1,24,24,24,24,24,24,1,24,4,2,2,0,0,2,3,3,31,4,1,24,4,4,2,2,31,0,0,0],
[0,0,0,31,2,24,24,24,4,24,1,24,31,0,3,2,3,0,31,2,3,2,1,1,1,1,1,24,4,2,2,2,3,0,0,3,31,2,4,2,2,2,4,24,24,2,3,0,0,0],
[0,0,31,31,2,2,24,4,24,4,24,24,24,4,2,3,0,0,3,2,2,2,2,24,24,2,2,2,3,31,31,0,0,0,2,2,4,2,2,2,31,2,2,2,4,4,31,0,0,0],
[0,0,31,2,2,2,2,2,2,4,4,4,24,4,24,2,2,0,2,4,4,2,2,4,2,3,0,3,2,31,3,3,0,0,2,2,2,2,2,2,2,31,2,2,2,2,2,3,0,0],
[0,0,31,2,2,2,2,2,2,2,2,2,2,2,4,4,2,0,0,3,3,0,3,0,3,2,24,3,3,3,2,2,0,3,2,2,2,2,2,2,2,2,31,2,2,2,2,3,3,0],
[0,0,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,3,24,31,0,0,2,2,31,2,2,3,2,1,2,0,3,2,2,2,2,2,2,2,2,31,2,2,2,2,31,3,0],
[0,0,31,2,31,2,2,2,2,2,2,2,2,2,2,2,2,3,1,24,4,3,0,2,4,2,2,2,1,24,2,31,0,3,2,2,2,2,2,2,2,2,2,2,2,2,31,2,3,0],
[0,3,31,2,2,2,31,2,2,2,2,31,2,2,2,2,2,3,2,24,1,3,0,2,2,2,2,4,24,2,4,31,0,3,2,2,2,2,2,2,2,2,2,2,2,2,31,31,3,0],
[0,3,31,31,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,4,24,0,3,4,2,2,2,2,2,2,4,31,0,3,4,2,2,2,2,2,2,2,2,2,2,2,31,2,3,0],
[0,3,31,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,24,1,3,3,1,2,4,4,2,2,2,2,31,0,3,4,2,2,2,2,2,2,2,2,2,2,2,3,31,3,0],
[0,3,3,31,2,31,2,2,2,2,2,2,2,2,2,2,31,0,4,4,24,3,31,24,2,4,4,2,4,2,2,31,0,3,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,0],
[0,0,3,31,2,2,2,2,2,2,2,2,2,2,2,2,3,0,2,2,24,0,3,2,2,2,2,2,2,2,2,3,0,3,2,2,2,31,2,2,2,2,2,2,2,2,3,3,3,0],
[0,0,3,31,31,2,2,2,2,2,2,2,2,31,2,2,0,0,2,4,24,0,3,2,31,2,2,2,31,31,2,3,0,3,2,2,31,31,31,2,2,31,2,2,2,2,3,0,0,0],
[0,0,3,3,3,31,31,31,31,31,3,31,31,31,31,2,0,0,3,2,31,0,3,2,2,31,3,3,31,31,31,0,0,3,31,31,31,31,31,3,3,2,31,31,31,3,3,0,0,0],
[0,0,0,0,3,3,0,3,3,3,3,3,2,31,3,3,0,0,0,31,31,0,3,3,3,31,3,3,3,3,3,0,0,3,2,31,2,3,3,3,3,3,3,3,3,3,0,0,0,0]];

function jumpPoint(y,x){
	$('#mycanvas').css('top', -y * scale + 200);
	$('#mycanvas').css('left', -x * scale + 400);
}

function postPoint(y,x,nowcolor){
	console.log("绘制后 "+y+"行 "+x+"列 "+nowcolor+"号颜色");
	lasttime = (new Date()) / 1000;
	getCountDown(lasttime + timelimit);
	$.post("/paintBoard/paint", {
		x: x,
		y: y,
		color: nowcolor
	}, function(resp) {
		if (resp.status !== 200){
			console.log(resp.data);
		}else{
			jumpPoint(y,x);
		}
	});
}
var paintBoard = [];
for(var i=0;i < H;i++){
	paintBoard[i]=[];
}
function paintOne(){
	if(new Date() < (lasttime + timelimit + 3) * 1000)return;
	var px=false;
	for (var i = 0; i < graph.length && !px; i++) {
		for (var j = 0; j < graph[i].length && !px; j++) {
			if(paintBoard[i+bgx][j+bgy]!=graph[i][j]){
				px=true;
				console.log("绘制前 "+(i+bgx)+"行 "+(j+bgy)+"列 "+paintBoard[i][j]+"号颜色");
				postPoint(i+bgx,j+bgy,graph[i][j]);
			}
		}
	}
}
var oldupdate=update;
update=function (y,x,color){
	if (dragged) {
		dragged = 0;
		return;
	}
	oldupdate(y,x,color);
	for(var i=0;i<colorlist.length;i++)if(colorlist[i]==color){
		paintBoard[y][x]=i;
	}
}
initialPaint();
lasttime = (new Date()) / 1000;
getCountDown(lasttime + timelimit);
setInterval(paintOne,1000);