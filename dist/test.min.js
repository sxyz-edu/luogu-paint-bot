!function(o){var n={};function t(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return o[e].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=o,t.c=n,t.d=function(o,n,e){t.o(o,n)||Object.defineProperty(o,n,{enumerable:!0,get:e})},t.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},t.t=function(o,n){if(1&n&&(o=t(o)),8&n)return o;if(4&n&&"object"==typeof o&&o&&o.__esModule)return o;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:o}),2&n&&"string"!=typeof o)for(var r in o)t.d(e,r,function(n){return o[n]}.bind(null,r));return e},t.n=function(o){var n=o&&o.__esModule?function(){return o.default}:function(){return o};return t.d(n,"a",n),n},t.o=function(o,n){return Object.prototype.hasOwnProperty.call(o,n)},t.p="",t(t.s=0)}([function(o,n,t){"use strict";var e;(e="https://www.luogu.org/paintBoard/board",new Promise(function(o,n){$.get(e,function(n){o(n)})})).then(function(o){var n=t(1).map(function(o){return o.split([]).map(function(o){return parseInt(o,36)})}),e=n.length,r=n[0].length;console.log("[INFO] Image parsed, w: ".concat(e,", h: ").concat(r));var c=o.trim().split("\n").map(function(o){return o.split([]).map(function(o){return parseInt(o,36)})});console.log("[INFO] Board got, w: ".concat(c.length,", h: ").concat(c[0].length));var a=new WebSocket("wss://ws.luogu.org/ws");a.onopen=function(){console.log("[INFO] Connected to WebSocket"),a.send(JSON.stringify({type:"join_channel",channel:"paintboard",channel_param:""}))},a.onmessage=function(o){var t=JSON.parse(o.data);if("paintboard_update"===t.type){var a=t.x,u=t.y,i=t.color;c[a][u]=i;var l=a-0,s=u-0;if(l<0||l>=e||s<0||s>=r)return;n[l][s]===i?console.log("[TEAM] Teammate found"):console.log("[TEAM] Enemy found")}},a.onclose=function(o){console.error("[ERRO] WebSocket closed")};!function o(){var t,a=(t=function(){for(var o=[],t=0;t<e;++t)for(var a=0;a<r;++a)if(c[t+0][a+0]!==n[t][a]){if(0===t||0===a||t===e-1||a===r-1)return console.log("[DIFF] Border first"),[[t,a]];o.push([t,a])}return console.log("[DIFF] Found ".concat(o.length," differences")),o}()).length?t[Math.floor(Math.random()*t.length)]:null;if(!a)return console.log("[PROC] Nothing to do with"),void setTimeout(o,1e4);var u,i,l=a[0],s=a[1],f=n[l][s],p=l+0,d=s+0;console.log("[PROC] Fixing ".concat(p," ").concat(d," to ").concat(f)),(u="https://www.luogu.org/paintBoard/paint",i={x:p,y:d,color:f},new Promise(function(o,n){$.post(u,i,function(n){o(n)})})).then(function(n){200!==n.status?(console.error("[PROC] Request status ".concat(n.status)),console.error("[ERRO] "+n.data),setTimeout(o,1e4)):(console.log("[PROC] Request status ".concat(n.status)),console.log("[PROC] Fixed ".concat(p," ").concat(d," to ").concat(f)),setTimeout(o,31e3))},function(n){console.error("[ERRO] "+n),setTimeout(o,1e4)})}()},console.error)},function(o){o.exports=["1"]}]);